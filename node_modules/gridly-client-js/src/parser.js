function toSingleLine(string) {
    return (string && string.length > 0) ? `"${string.replace(/\n/g, '<br />').replace(/"/g, '\'')}"` : `""`;
}

function toList(value = []) {
    let arrList = value;
    if (typeof value === 'string') {
        arrList = arrList.split(';');
    }

    const list = [];
    arrList.forEach(item => {
        list.push(`\n - ${item.trim()}`)
    })

    return list.join('');
}

function i18nToMD(records, columns) {
    const content = [];
    
    records.forEach((element) => {
        if (element[columns.stringID]) {
            content.push(`
${element[columns.stringID]}: 
    other: ${toSingleLine(element[columns.value])}
`);
        }
    });

    return content.join('');
}

function postToMD(record, columns) {
    const content = [];
    content.push('---');
    content.push(
        `
title: ${toSingleLine(record[columns.title])}
description: ${toSingleLine(record[columns.description])}
date: ${record[columns.date]}
layout: post
author: ${toSingleLine(record[columns.author])}
tags: ${toList(record[columns.tags])}
image: ${toSingleLine(record[columns.coverImage])}
top: ${record[columns.isTop]}
`
    );
    content.push('---\n');

    content.push(record[columns.content]);

    return content.join('');
}

module.exports = {
    i18nToMD,
    postToMD
};
